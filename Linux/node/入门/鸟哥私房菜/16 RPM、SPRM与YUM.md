# RPM、SRPM与YUM  
> 我们可以使用源码通过编译的方式进行安装软件，也可以使用使用厂商编译好的可执行软件直接安装  
  
## 软件管理员  
### RPM  
> RPM:RedHat Package Manager，使用命令"rpm/rpmbuild",线上升级指令"yum"  
  
RPM将需要安装的软件先编译过，并打包成为RPM机制的包装文件，通过包装好的软件里面预设的资料库记录，记录软件安装时必须的相依性软件，当安装在Linux主机时，RPM会先依据软件里面的资料查询Linux主机的相依软件是否满足，满足则予以安装，否则不予安装  
RPM的优点：  
* RPM中包括已经编译过的程序与设定文件资料，可以让使用者免除重新编译的困扰  
* RPM在被安装之前，会先检查系统的磁盘容量，操作系统版本等，可避免文件被错误安装  
* RPM文件本身提供软件版本信息，相依软件名称，软件用途说明，软件包含文件等信息，便于了解软件  
* RPM的管理方式使用资料库记录RPM文件的相关参数，便于升级，移除，查询与验证  

RPM的问题：  
* 软件安装的环境必须与打包时的环境一致或相当  
* 需要满足软件的相依性需求  
* 反安装时需要特别小心，最底层的软件不可先移除，否则可能造成整个系统的问题  
### SPRM  
> SPRM:Source RPM,就是RPM文件里面含有原始码，SPRM提供的软件内容并没有被编译过，文件的后缀名一般为".src.rpm"，他与Tarball的区别是SRPM提供软件相依性说明以及RPM提供的所有档案，还提供了参数设定文件(configure/config和Makefile)  
  
使用SRPM进行软件安装的步骤：  
1. 将软件以RPM管理方式编译，将SRPM编译成RPM文件  
2. 将编译完成的RPM文件安装到Linux系统中  

RPM与SRPM的区别是RPM必须在相同的Linux环境下才能安装，而我们可以修改SRPM中的参数设定文件，重新编译生成适合我们自己Linux环境的RPM文件  
### RPM软件安装  
* 安装路径：RPM软件安装完毕后，软件相关的信息会被写入/var/lib/rpm/目录下的资料库文件中  
* 安装指令："rpm -ivh 软件文件"  
* RPM升级(upgrade)指令："rpm -Uvh 软件文件"（若软件未安装，则安装软件，软件已安装，则更新到新版）  
* RPM更新(freshen)指令："rpm -Fvh 软件指令"（若软件未安装，不做处理，软件已安装，则升级软件）
* RPM查询(query)指令："rpm -q 软件文件" （其实就是查询/var/lib/rpm中的内容）  
* RPM验证(Verify)指令："rpm -V 软件文件"（可以查看软件是否被更改过）  
* RPM数字签名(digital signature)指令:"rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7", 我们在安装软件时需要安装软件厂商的公钥，当安装其RPM软件时，rpm指令会去读取RPM文件中的签名信息与本机的签名信息对比，相同进行安装，否则不进行安装(CentOS的公钥在/etc/pki/rpm-gpg/目录下)  
* RPM反安装(erase)与重建(rebuilddb)资料库指令："rpm -e/--rebuilddb"  
### YUM线上升级  
> 通过RPM软件文件内部的相依软件资料，在安装软件的过程中，查询相依软件是否安装，若没有安装，则将相依软件一并安装  
  
CentOS将释放的软件放到YUM服务器中，然后分析这些软件的相依性，将软件的记录信息写下来，然后将这些信息分析后记录成软件相关性的清单列表，这些列表资料与软件所在的本机或网络位置可以称为容器或者软件仓库或软件库。当用户端有软件需要安装时，用户端会主动向网络上的yum服务器的软件库网址下载清单列表，然后通过清单列表的资料与本机RPM资料库已存在的软件资料对比，然后安装需要的未安装的相依软件  
* yum查询指令："yum [list|info|search|provides|whatprovides] "  
* yum安装指令："yum install 软件"  
* yum升级指令："yum update 软件"  
* yum移除指令："yum remove 软件"  
* yum配置信息保存在/etc/yum.repos.d/CentOS-Base.repo文件中，可修改该文件内容修改软件库地址  
